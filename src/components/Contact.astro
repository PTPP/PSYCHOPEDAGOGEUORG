---
interface Props {
  lang: "pl" | "en";
}

const { lang } = Astro.props;

const content =
  lang === "pl"
    ? {
        title: "Kontakt i lokalizacja",
        subtitle: "Szybki kontakt, rejestracja i dojazd do Centrum Wsparcia.",
        cardsTitle: "Rejestracja",
        addressTitle: "Centrum Wsparcia TPP",
        addressLine1: "59-700 Bolesławiec",
        addressLine2: "ul. Warszawska 1/3",
        ctaBook: "Umów wizytę online",
        ctaDirections: "Wyznacz trasę",
        phoneLabel: "Telefon",
        emailLabel: "E-mail",
        hoursLabel: "Godziny",
        // PODMIEŃ NA SWOJE DANE:
        phone: "+48 733 379 538",
        email: "biuro@psychopedagog.org",
        hours: "Pn–Pt: 09:00–18:00 (sekretariat)",
      }
    : {
        title: "Contact & Location",
        subtitle:
          "Fast booking, contact details, and directions to our Support Centre.",
        cardsTitle: "Reception",
        addressTitle: "TPP Support Centre",
        addressLine1: "59-700 Bolesławiec",
        addressLine2: "ul. Warszawska 1/3",
        ctaBook: "Book online",
        ctaDirections: "Get directions",
        phoneLabel: "Phone",
        emailLabel: "Email",
        hoursLabel: "Hours",
        // REPLACE WITH YOUR DETAILS:
        phone: "+48 733 379 538",
        email: "office@psychopedagog.org",
        hours: "Mo–Fr: 09:00–18:00 (administration)",
      };

const directionsUrl = "https://maps.app.goo.gl/VwuGzxfhpE9UdzZD8";

const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  name: content.addressTitle,
  url: "https://www.psychopedagog.org/",
  telephone: content.phone,
  email: content.email,
  address: {
    "@type": "PostalAddress",
    streetAddress: "ul. Warszawska 1/3",
    postalCode: "59-700",
    addressLocality: "Bolesławiec",
    addressCountry: "PL",
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: 51.26189917959529,
    longitude: 15.565863215918716,
  },
  openingHoursSpecification: [
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
      opens: "09:00",
      closes: "18:00",
    },
  ],
};
---

<section id="contact" class="section contact">
  <div class="container">
    <div class="section-header text-center">
      <h2>{content.title}</h2>
      <p class="subtitle">{content.subtitle}</p>
    </div>

    <div class="contact-grid">
      <!-- LEFT: Contact cards -->
      <div class="cards-column">
        <h3 class="col-title">{content.cardsTitle}</h3>

        <div class="cards">
          <div class="info-card">
            <div class="label">{content.phoneLabel}</div>
            <a class="value" href={`tel:${content.phone.replace(/\s/g, "")}`}>
              {content.phone}
            </a>
          </div>

          <div class="info-card">
            <div class="label">{content.emailLabel}</div>
            <a class="value" href={`mailto:${content.email}`}>
              {content.email}
            </a>
          </div>

          <div class="info-card">
            <div class="label">{content.hoursLabel}</div>
            <div class="value">{content.hours}</div>
          </div>
        </div>

        <div class="cta-row">
          <a class="btn-primary" href="https://www.psychopedagog.org/#/booking"
            >{content.ctaBook}</a
          >
        </div>

        <div class="note">
          {
            lang === "pl"
              ? "Jeśli potrzebujesz szybkiej informacji — zadzwoń lub napisz. W sprawach formalnych przygotuj (opcjonalnie) cel kontaktu i podstawowe dane."
              : "If you need a quick answer — call or email us. For formal matters, (optionally) prepare your reason for contact and basic details."
          }
        </div>
      </div>

      <!-- RIGHT: Map card (map fills the whole box) -->
      <div class="map-column">
        <h3 class="col-title">{content.addressTitle}</h3>

        <div class="map-card">
          <iframe
            class="map-iframe"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2516.327464303429!2d15.565863215918716!3d51.26189917959529!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x470f128c11000001%3A0x6a00000000000000!2sTowarzystwo%20Psychopedagogiczne!5e0!3m2!1spl!2spl!4v1630000000000!5m2!1spl!2spl"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title="Google Maps - Towarzystwo Psychopedagogiczne"
            allowfullscreen></iframe>

          <div class="map-overlay">
            <div class="overlay-title">{content.addressTitle}</div>
            <div class="overlay-lines">
              <div>{content.addressLine1}</div>
              <div>{content.addressLine2}</div>
            </div>

            <a
              class="btn-secondary directions"
              href={directionsUrl}
              target="_blank"
              rel="noopener"
            >
              {content.ctaDirections}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script
  type="application/ld+json"
  set:html={JSON.stringify(localBusinessSchema)}
/>

<style>
  .contact {
    background-color: transparent;
  }

  .section-header {
    margin-bottom: var(--spacing-xl);
  }

  .subtitle {
    color: var(--color-text-light);
    font-size: 1.1rem;
  }

  .contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--spacing-xl);
    align-items: start;
  }

  .col-title {
    margin: 0 0 var(--spacing-md);
    color: var(--color-primary);
  }

  .cards {
    display: grid;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
  }

  .info-card {
    background: var(--color-bg-card);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border: 1px solid transparent;
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease,
      border-color 0.2s ease;
  }

  .info-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--color-primary-light);
  }

  .label {
    font-size: 0.85rem;
    color: var(--color-text-light);
    margin-bottom: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.6px;
  }

  .value {
    font-size: 1.05rem;
    color: var(--color-text);
    font-weight: 600;
    text-decoration: none;
  }

  .cta-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
  }

  .btn-primary,
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem 1.1rem;
    border-radius: var(--radius-full);
    font-weight: 700;
    text-decoration: none;
    letter-spacing: 0.3px;
    transition:
      transform 0.2s ease,
      box-shadow 0.2s ease;
    cursor: pointer;
  }

  .btn-primary {
    background: var(--color-accent);
    color: #fff;
    box-shadow: var(--shadow-sm);
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0);
    border: 1px solid var(--color-accent);
    color: var(--color-accent);
  }

  .btn-primary:hover,
  .btn-secondary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .note {
    color: var(--color-text-light);
    line-height: 1.7;
    font-size: 0.98rem;
  }

  /* MAP: one card, map fills whole box */
  .map-card {
    position: relative;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    background: var(--color-bg-card);
    min-height: 420px; /* możesz zmienić */
  }

  .map-iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }

  /* Overlay with address + CTA */
  .map-overlay {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    padding: var(--spacing-md);
    background: var(--color-bg-header);
    backdrop-filter: blur(8px);
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    display: grid;
    gap: 0.5rem;
    text-align: left;
  }

  .overlay-title {
    font-weight: 800;
    color: var(--color-text);
  }

  .overlay-lines {
    color: var(--color-text-light);
    line-height: 1.4;
  }

  .directions {
    width: fit-content;
  }

  @media (max-width: 768px) {
    .map-card {
      min-height: 360px;
    }
    .map-overlay {
      text-align: center;
      justify-items: center;
    }
  }
</style>
