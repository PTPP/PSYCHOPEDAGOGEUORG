---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const pricingItems = [
    {
        categories: ["Terapia i Pomoc", "Doro≈õli", "Dzieci i M≈Çodzie≈º"],
        subcategory: "Poradnictwo",
        title: "Konsultacja Wstƒôpna",
        description:
            "Konsultacja z Counsellorem, Pedagogiem lub DoradcƒÖ Psychospo≈Çecznym. Interwencja kryzysowa.",
        duration: "50 min",
        price: 200,
        tags: ["terapia", "konsultacja"],
        icon: "üëã",
    },
    {
        categories: ["Terapia i Pomoc", "Dla SƒÖdu"],
        subcategory: "SƒÖdowe",
        title: "Konsultacja SƒÖdowa",
        description:
            "Konsultacja z Ekspertem ds. Opiniowania. Analiza sytuacji procesowej i rodzinnej.",
        duration: "50 min",
        price: 300,
        tags: ["sƒÖd", "konsultacja"],
        icon: "‚öñÔ∏è",
    },
    {
        categories: ["Terapia i Pomoc", "Dzieci i M≈Çodzie≈º", "Doro≈õli"],
        subcategory: "Counselling",
        title: "Indywidualny Trening Psychospo≈Çeczny",
        description:
            "To cykl spotka≈Ñ nastawionych na rozw√≥j umiejƒôtno≈õci i codziennƒÖ higienƒô psychicznƒÖ. Pracujemy w spos√≥b konkretny i zadaniowy: wybierasz obszar, kt√≥ry najbardziej przeszkadza w funkcjonowaniu (np. napiƒôcie, przeciƒÖ≈ºenie, stres, nat≈Çok my≈õli, spadek motywacji), a my dobieramy proste narzƒôdzia do wdro≈ºenia od razu.",
        duration: "50 min",
        price: 200,
        tags: ["terapia", "indywidualna", "counselling"],
        icon: "üß†",
    },
    {
        categories: ["Terapia i Pomoc", "Dzieci i M≈Çodzie≈º"],
        subcategory: "Rozw√≥j i Edukacja",
        title: "Wsparcie psychopedagogiczne dzieci i m≈Çodzie≈ºy",
        description:
            "Spotkania edukacyjno-rozwojowe: regulacja emocji, TKE-S, wsparcie w kryzysie, konsultacje wychowawcze.",
        duration: "50 min",
        price: 200,
        tags: ["dzieci", "m≈Çodzie≈º", "rozw√≥j"],
        icon: "üå±",
    },
    {
        categories: ["Terapia i Pomoc", "Dla SƒÖdu"],
        subcategory: "SƒÖdowe / Edukacja",
        title: "Sesja Korekcyjno-Edukacyjna",
        description:
            "Realizacja zalece≈Ñ sƒÖdowych, poprawa kompetencji wychowawczych.",
        duration: "50 min",
        price: 300,
        tags: ["sƒÖd", "edukacja"],
        icon: "üéì",
    },
    {
        categories: ["Terapia i Pomoc", "Dzieci i M≈Çodzie≈º", "Doro≈õli"],
        subcategory: "Rodzina",
        title: "Poradnictwo Rodzinne / Mediacje",
        description: "Sesja Rodzinna / Systemowa. RozwiƒÖzywanie konflikt√≥w.",
        duration: "50 min",
        price: 200,
        tags: ["rodzina", "mediacje"],
        icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
    },
    {
        categories: ["Terapia i Pomoc", "Doro≈õli"],
        subcategory: "Pary",
        title: "Trening Relacji dla Par",
        description: "Praca nad komunikacjƒÖ i blisko≈õciƒÖ w zwiƒÖzku.",
        duration: "50 min",
        price: 200,
        tags: ["pary", "zwiƒÖzek"],
        icon: "üíë",
    },
    {
        categories: ["Terapia i Pomoc", "Doro≈õli", "Dzieci i M≈Çodzie≈º"],
        subcategory: "Profilaktyka",
        title: "Profilaktyka Uzale≈ºnie≈Ñ",
        description:
            "Wsparcie w trze≈∫wo≈õci. Dla os√≥b zg≈ÇaszajƒÖcych siƒô dobrowolnie.",
        duration: "50 min",
        price: 200,
        tags: ["uzale≈ºnienia", "profilaktyka"],
        icon: "üõ°Ô∏è",
    },
    {
        categories: ["Terapia i Pomoc", "Doro≈õli", "Dzieci i M≈Çodzie≈º"],
        subcategory: "Online",
        title: "Sesja Online",
        description:
            "Counselling / E-wizyta. Pe≈Çnowarto≈õciowa sesja przez internet.",
        duration: "50 min",
        price: 200,
        tags: ["online", "zdalnie"],
        icon: "üíª",
    },
    {
        categories: ["Terapia i Pomoc", "Dzieci i M≈Çodzie≈º", "Doro≈õli"],
        subcategory: "Wizyta",
        title: "Wizyta Domowa",
        description:
            "Sesja w ≈õrodowisku klienta (+ koszt dojazdu zale≈ºnie od lokalizacji).",
        duration: "50 min",
        price: 400,
        pricePrefix: "od ",
        tags: ["domowa", "mobilna"],
        icon: "üè†",
    },

    {
        categories: ["Dietetyka", "Terapia i Pomoc"],
        subcategory: "Konsultacja",
        title: "Konsultacja Psychodietetyczna",
        description: "Zmiana nawyk√≥w ≈ºywieniowych.",
        duration: "50 min",
        price: 170,
        tags: ["dieta", "od≈ºywianie"],
        icon: "üçé",
    },
    {
        categories: ["Dietetyka"],
        subcategory: "Plany",
        title: "Indywidualne Plany ≈ªywieniowe 1 tydzie≈Ñ",
        description: "Dopasowane do Twoich potrzeb i preferencji.",
        duration: "1 Tydzie≈Ñ",
        price: 100,
        tags: ["dieta", "plan"],
        icon: "üìÖ",
    },
    {
        categories: ["Dietetyka"],
        subcategory: "Plany",
        title: "Indywidualne Plany ≈ªywieniowe 2 tygodnie",
        description: "Dopasowane do Twoich potrzeb i preferencji.",
        duration: "2 Tygodnie",
        price: 200,
        tags: ["dieta", "plan"],
        icon: "ü•ó",
    },
    {
        categories: ["Dietetyka"],
        subcategory: "Plany",
        title: "Indywidualne Plany ≈ªywieniowe 4 tygodnie",
        description: "Dopasowane do Twoich potrzeb i preferencji.",
        duration: "4 Tygodnie",
        price: 400,
        tags: ["dieta", "plan"],
        icon: "ü•ë",
    },
    {
        categories: ["Dzieci i M≈Çodzie≈º", "Terapia i Pomoc"],
        subcategory: "Grupy",
        title: "TUS - Trening Umiejƒôtno≈õci Spo≈Çecznych",
        description: "Zajƒôcia grupowe rozwijajƒÖce kompetencje spo≈Çeczne.",
        duration: "60 min / tydz",
        price: 110,
        tags: ["dzieci", "grupa", "tus"],
        icon: "üé≤",
    },
    {
        categories: ["Terapia i Pomoc", "Doro≈õli"],
        subcategory: "Doro≈õli",
        title: "Grupa Wsparcia i Rozwoju",
        description: "Abonament miesiƒôczny.",
        duration: "120 min / tydz",
        price: 600,
        tags: ["doro≈õli", "grupa"],
        icon: "üë•",
    },
    {
        categories: ["Dla SƒÖdu"],
        subcategory: "Dokumentacja",
        title: "Za≈õwiadczenie o uczestnictwie",
        description:
            "Wymagana ciƒÖg≈Ço≈õƒá spotka≈Ñ (min 2 sesje). Czas realizacji do 7 dni roboczych.",
        duration: "Dokument",
        price: 300,
        tags: ["sƒÖd", "za≈õwiadczenie"],
        icon: "üìÑ",
    },
    {
        categories: ["Dla SƒÖdu"],
        subcategory: "Ekspertyzy",
        title: "Opinia Psychopedagogiczna",
        description:
            "Kompleksowa opinia dla SƒÖdu lub Instytucji. Dokument ma charakter opinii prywatnej. Cena zale≈ºy od liczby badanych i zakresu opinii.",
        duration: "Obszerny raport",
        price: 5000,
        pricePrefix: "od ",
        tags: ["sƒÖd", "opinia"],
        icon: "üìë",
    },
    {
        categories: ["Dla SƒÖdu"],
        subcategory: "Dowody",
        title: "Transkrypcja Nagra≈Ñ",
        description: "Zamiana nagra≈Ñ audio/wideo na tekst do cel√≥w dowodowych.",
        duration: "Za godzinƒô nagrania",
        price: 150,
        pricePrefix: "od ",
        tags: ["sƒÖd", "dowody"],
        icon: "üìº",
    },
    {
        categories: ["Kursy i Szkolenia", "Dla SƒÖdu"],
        subcategory: "Dla SƒÖdu",
        title: "Kurs Kompetencji Rodzicielskich (Indywidualny)",
        description:
            "10h zajƒôƒá z trenerem, Egzamin, Certyfikat dla SƒÖdu, Suplement.",
        duration: "Indywidualny",
        price: 3500,
        tags: ["kurs", "rodzice", "sƒÖd"],
        icon: "üéì",
    },
    {
        categories: ["Kursy i Szkolenia", "Dla SƒÖdu"],
        subcategory: "Dla SƒÖdu",
        title: "Kurs Kompetencji Rodzicielskich (Grupowy)",
        description:
            "10h zajƒôƒá z trenerem, Egzamin, Certyfikat dla SƒÖdu, Suplement.",
        duration: "Grupowy",
        price: 1500,
        tags: ["kurs", "rodzice", "sƒÖd"],
        icon: "üè´",
    },
    {
        categories: ["Kursy i Szkolenia", "Terapia i Pomoc"],
        subcategory: "Dla Par",
        title: "Kurs Przedma≈Ç≈ºe≈Ñski / Dla Par",
        description: "10h zajƒôƒá, Certyfikat, warsztaty komunikacji.",
        duration: "10h zajƒôƒá",
        price: 1000,
        tags: ["kurs", "pary"],
        icon: "üíç",
    },
    {
        categories: ["Kursy i Szkolenia"],
        subcategory: "Edukacja",
        title: "Egzamin Poprawkowy",
        description: "Ponowne podej≈õcie do testu ko≈Ñcowego kursu.",
        duration: "Test",
        price: 350,
        tags: ["egzamin"],
        icon: "üìù",
    },
];

const filters = [
    { label: "Wszystko", value: "all" },
    { label: "Wsparcie i Pomoc", value: "Terapia i Pomoc" },
    { label: "Dzieci i M≈Çodzie≈º", value: "Dzieci i M≈Çodzie≈º" },
    { label: "Dla SƒÖdu", value: "Dla SƒÖdu" },
    { label: "Dietetyka", value: "Dietetyka" },
    { label: "Kursy i Szkolenia", value: "Kursy i Szkolenia" },
];
---

<Layout
    title="Cennik Wsparcia Psychospo≈Çecznego i Edukacji | TPP Boles≈Çawiec"
    description="Sprawd≈∫ ceny counsellingu (wsparcia psychospo≈Çecznego), mediacji rodzinnych, konsultacji, opinii prywatnych i kurs√≥w. Boles≈Çawiec i online."
    lang="pl"
>
    <Header lang="pl" />

    <main class="pricing-page">
        <section class="page-header">
            <div class="container">
                <h1>Karta Us≈Çug Wsparcia i Rozwoju</h1>
                <p class="subtitle">
                    ≈öwiadczonych przez Centrum Wsparcia Towarzystwa
                    Psychopedagogicznego
                </p>
                <p class="legal-note">
                    w ramach odp≈Çatnej dzia≈Çalno≈õci po≈ºytku publicznego (Dz.U.
                    2024, poz. 1491)
                </p>
                <p class="date">Boles≈Çawiec ‚Äî obowiƒÖzuje od 01.01.2026</p>
            </div>
        </section>

        <div class="container pricing-container">
            <!-- Legal Disclaimer -->
            <div class="disclaimer-alert">
                <p>
                    <strong>Wa≈ºna informacja prawna:</strong> Niniejszy opis ma charakter
                    wy≈ÇƒÖcznie informacyjny i nie stanowi oferty handlowej. Us≈Çugi
                    ≈õwiadczone przez Towarzystwo majƒÖ charakter edukacyjny, rozwojowy
                    i wsparciowy (counselling).
                    <br /><br />
                    <strong>Nie stanowiƒÖ ≈õwiadcze≈Ñ opieki zdrowotnej</strong> w rozumieniu
                    ustawy o dzia≈Çalno≈õci leczniczej. W przypadku podejrzenia zaburze≈Ñ
                    wymagajƒÖcych leczenia farmakologicznego lub hospitalizacji, nasi
                    specjali≈õci kierujƒÖ do plac√≥wek ochrony zdrowia. KorzystajƒÖc z
                    us≈Çug Towarzystwa, akceptujesz ten zakres wsp√≥≈Çpracy.
                </p>
            </div>

            <!-- Rules Panel (Mini-Panel Zasad) -->
            <div class="rules-panel">
                <div class="rule-item">
                    <h3>P≈Çatno≈õƒá</h3>
                    <p>
                        Bezgotowkowa, karta, Apply Pay, Google Pay,BLIK. Przy
                        pomocy linku SumUP lub terminalem w poradni. P≈Çatno≈õƒá
                        regulowana przed wizytƒÖ.
                    </p>
                </div>
                <div class="rule-item">
                    <h3>Odwo≈Çanie wizyty</h3>
                    <p>
                        Do 4h przed terminem bezp≈Çatnie. Brak odwo≈Çania: 100%
                        ceny.
                    </p>
                </div>
                <div class="rule-item">
                    <h3>Lokalizacja</h3>
                    <p>
                        Gabinet w Boles≈Çawcu (Warszawska 1/3) lub Online. Wizyty
                        domowe za dop≈ÇatƒÖ.
                    </p>
                </div>
                <div class="rule-item">
                    <h3>Dokumentacja</h3>
                    <p>
                        Opinie i za≈õwiadczenia wydajemy w terminie do 14 dni
                        roboczych od zlecenia i oplaty.
                    </p>
                </div>
            </div>

            <!-- Search & Filter -->
            <div class="filter-section">
                <div class="search-box">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Czego szukasz? Np. 'terapia', 'sƒÖd', 'dzieci', 'online'..."
                    />
                </div>

                <div class="filter-tabs">
                    {
                        filters.map((filter) => (
                            <button
                                class={`filter-btn ${filter.value === "all" ? "active" : ""}`}
                                data-filter={filter.value}
                            >
                                {filter.label}
                            </button>
                        ))
                    }
                </div>

                <p id="resultsCount" class="results-count" aria-live="polite">
                </p>
                <div id="noResults" class="no-results" hidden>
                    Brak wynik√≥w. Zmie≈Ñ filtr albo spr√≥buj innej frazy.
                </div>
            </div>

            <!-- Pricing Categories -->
            <div id="pricing-grid" class="pricing-grid">
                {
                    pricingItems.map((item) => (
                        <div
                            class="pricing-card"
                            data-categories={JSON.stringify(item.categories)}
                            data-tags={item.tags.join(" ")}
                            data-title={item.title.toLowerCase()}
                            data-desc={item.description.toLowerCase()}
                            data-subcategory={item.subcategory.toLowerCase()}
                        >
                            <div class="card-header">
                                <div class="header-top">
                                    <span class="category-badge">
                                        {item.subcategory}
                                    </span>
                                    <span class="icon">{item.icon}</span>
                                </div>
                                <h3>{item.title}</h3>
                            </div>
                            <div class="card-body">
                                <p>{item.description}</p>
                            </div>
                            <div class="card-footer">
                                <span class="duration">{item.duration}</span>
                                <span class="price">
                                    {`${item.pricePrefix || ""}${item.price} z≈Ç`}
                                </span>
                            </div>
                        </div>
                    ))
                }
            </div>
        </div>

        <section class="cta-section">
            <div class="container">
                <h2>Gotowy na pierwszy krok?</h2>
                <p>
                    Skontaktuj siƒô z nami, aby um√≥wiƒá wizytƒô w dogodnym dla
                    Ciebie terminie.
                </p>
                <a
                    href="https://rejestracja.psychopedagog.org/#/booking"
                    class="btn btn-primary btn-lg">Um√≥w wizytƒô online</a
                >
            </div>
        </section>
    </main>

    <Footer lang="pl" />
</Layout>

<script>
    // @ts-nocheck
    const searchInput = document.getElementById("searchInput");
    const filterBtns = document.querySelectorAll(".filter-btn");
    const cards = document.querySelectorAll(".pricing-card");
    const resultsCount = document.getElementById("resultsCount");
    const noResults = document.getElementById("noResults");

    let currentFilter = "all";
    let searchQuery = "";

    const normalize = (s) =>
        (s || "")
            .toLowerCase()
            .normalize("NFD")
            .replace(/[\u0300-\u036f]/g, ""); // usuwa polskie znaki

    function getCategories(el) {
        try {
            return JSON.parse(el.dataset.categories || "[]");
        } catch {
            return [];
        }
    }

    function filterItems() {
        let visible = 0;

        cards.forEach((card) => {
            const el = card;

            const categories = getCategories(el);
            const tags = normalize(el.dataset.tags);
            const title = normalize(el.dataset.title);
            const desc = normalize(el.dataset.desc);
            const subcategory = normalize(el.dataset.subcategory);
            const categoriesText = normalize(categories.join(" "));

            const q = normalize(searchQuery);

            const matchesFilter =
                currentFilter === "all" || categories.includes(currentFilter);

            const matchesSearch =
                q.length === 0 ||
                title.includes(q) ||
                tags.includes(q) ||
                desc.includes(q) ||
                subcategory.includes(q) ||
                categoriesText.includes(q);

            const show = matchesFilter && matchesSearch;

            if (show) {
                visible += 1;
                el.classList.remove("is-hidden");
            } else {
                el.classList.add("is-hidden");
            }
        });

        if (resultsCount) resultsCount.textContent = `Znaleziono: ${visible}`;

        if (noResults) {
            noResults.hidden = visible !== 0;
        }
    }

    // init
    filterItems();

    // filters
    filterBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
            filterBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            currentFilter = btn.dataset.filter || "all";
            filterItems();
        });
    });

    // search
    if (searchInput && searchInput.tagName === "INPUT") {
        searchInput.addEventListener("input", (e) => {
            searchQuery = e.target.value || "";
            filterItems();
        });
    }
</script>

<style>
    .pricing-page {
        background-color: var(--color-bg-body);
        min-height: 100vh;
        padding-bottom: 4rem;
    }

    .page-header {
        background-color: var(--color-bg-alt);
        padding: 3rem 0;
        text-align: center;
        border-bottom: 1px solid #eee;
    }

    .page-header h1 {
        font-size: 2rem;
        color: var(--color-primary);
        margin-bottom: 0.5rem;
        text-transform: uppercase;
    }

    .subtitle {
        font-size: 1.1rem;
        font-weight: 500;
        margin-bottom: 0.2rem;
    }

    .legal-note {
        font-size: 0.9rem;
        color: var(--color-text-light);
        margin-bottom: 1rem;
    }

    .date {
        font-weight: 600;
    }

    .disclaimer-alert {
        background: var(--color-bg-card);
        border-left: 4px solid var(--color-primary);
        padding: 1.5rem;
        margin: 2rem 0;
        border-radius: var(--radius-sm);
        box-shadow: var(--shadow-sm);
        color: var(--color-text-light);
        font-size: 0.9rem;
        line-height: 1.5;
    }

    /* Search & Filters */
    .filter-section {
        margin-bottom: 3rem;
    }

    .search-box {
        margin-bottom: 1.5rem;
    }

    .search-box input {
        width: 100%;
        padding: 1rem 1.5rem;
        background: var(--color-bg-card);
        border: 2px solid var(--color-bg-alt);
        border-radius: var(--radius-full);
        font-size: 1rem;
        transition: all 0.3s;
        outline: none;
    }

    .search-box input:focus {
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgba(220, 88, 42, 0.1);
    }

    .filter-tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
    }

    .filter-btn {
        background: var(--color-bg-card);
        border: 1px solid #e0e0e0;
        padding: 0.5rem 1.2rem;
        border-radius: var(--radius-full);
        cursor: pointer;
        font-family: var(--font-body);
        font-weight: 500;
        color: var(--color-text);
        transition: all 0.2s;
    }

    .filter-btn:hover {
        background: var(--color-primary-light);
        border-color: var(--color-primary-light);
    }

    .filter-btn.active {
        background: var(--color-primary);
        color: white;
        border-color: var(--color-primary);
    }

    /* Pricing Grid */
    .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .pricing-card {
        background: var(--color-bg-card);
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-sm);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition:
            transform 0.3s,
            opacity 0.3s;
    }

    .pricing-card:hover {
        transform: translateY(-5px) !important;
        box-shadow: var(--shadow-md);
    }

    .card-header {
        margin-bottom: 1rem;
    }

    .header-top {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 0.5rem;
    }

    .category-badge {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: var(--color-text-light);
        font-weight: 600;
        display: block;
    }

    .icon {
        font-size: 1.5rem;
        line-height: 1;
    }

    .card-header h3 {
        font-size: 1.25rem;
        color: var(--color-primary);
        margin: 0;
    }

    .card-body {
        flex-grow: 1;
        margin-bottom: 1.5rem;
    }

    .card-body p {
        color: var(--color-text);
        font-size: 0.95rem;
        line-height: 1.5;
        margin: 0;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid #f0f0f0;
        padding-top: 1rem;
    }

    .duration {
        font-size: 0.9rem;
        color: var(--color-text-light);
        background: var(--color-bg-alt);
        padding: 0.2rem 0.6rem;
        border-radius: var(--radius-sm);
    }

    .price {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--color-text);
    }

    /* CTA */
    .cta-section {
        background: var(--color-primary);
        color: white;
        text-align: center;
        padding: 3rem 0;
        margin-top: 3rem;
        border-radius: var(--radius-lg);
    }

    .cta-section h2 {
        color: white;
        margin-bottom: 0.5rem;
    }

    .cta-section p {
        margin-bottom: 1.5rem;
        opacity: 0.9;
    }

    .btn-lg {
        background: white;
        color: var(--color-primary);
        padding: 0.8rem 2rem;
        font-weight: 600;
    }

    .rules-panel {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
        padding: 1.5rem;
        background: var(--color-bg-alt);
        border-radius: var(--radius-md);
        text-align: center;
    }

    .rule-item h3 {
        font-size: 1.1rem;
        color: var(--color-primary);
        margin-bottom: 0.5rem;
    }

    .rule-item p {
        font-size: 0.9rem;
        color: var(--color-text);
        margin: 0;
    }

    .pricing-card.is-hidden {
        display: none !important;
    }

    .results-count {
        margin: 0.5rem 0 1rem;
        color: var(--color-text-light);
        text-align: center;
        font-weight: 600;
    }

    .no-results {
        text-align: center;
        padding: 1rem;
        border-radius: var(--radius-md);
        background: var(--color-bg-card);
        box-shadow: var(--shadow-sm);
        color: var(--color-text);
        margin-bottom: 1rem;
    }

    @media (prefers-reduced-motion: reduce) {
        .pricing-card,
        .pricing-card:hover {
            transition: none !important;
            transform: none !important;
        }
    }
</style>
